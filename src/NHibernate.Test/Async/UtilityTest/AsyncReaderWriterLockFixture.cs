//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by AsyncGenerator.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------


using System;
using System.Threading;
using System.Threading.Tasks;
using NHibernate.Util;
using NUnit.Framework;

namespace NHibernate.Test.UtilityTest
{
	public partial class AsyncReaderWriterLockFixture
	{

		[Test]
		public async Task TestInvaildExitReadLockUsageAsync()
		{
			var l = new AsyncReaderWriterLock();
			var readReleaser = await (l.ReadLockAsync());
			var readReleaser2 = await (l.ReadLockAsync());

			readReleaser.Dispose();
			readReleaser2.Dispose();
			Assert.Throws<InvalidOperationException>(() => readReleaser.Dispose());
			Assert.Throws<InvalidOperationException>(() => readReleaser2.Dispose());
		}

		[Test]
		public async Task TestInvaildExitWriteLockUsageAsync()
		{
			var l = new AsyncReaderWriterLock();
			var writeReleaser = await (l.WriteLockAsync());

			writeReleaser.Dispose();
			Assert.Throws<InvalidOperationException>(() => writeReleaser.Dispose());
		}
	}
}
